const AttendanceModel = require('../../models/attendance/attendencemodel');
const AddProgressModel = require('../../models/attendance/attendencemodel');

const getAttendenceRecord = async (req, res) => {
    let x = await AttendanceModel.find();
    console.log('xxxxxxxx', x);
}

const updateAttendence = async (req, res) => {
    console.log('request', req.body);
    try {
        const x = req.body.todayprogress;
        console.log('x', x);
        let todayprogress = [];
        const addprogress = new AddProgressModel({ });
        for (let i = 0; i < x.length; i++) {

            const data = {
                hours: x[i].hours,
                category: x[i].category,
                skill: x[i].skill
            }
            todayprogress.push(data)

        }
        addprogress.todayprogress = todayprogress;
        const Progressresponse = await addprogress.save();
        console.log('Progressresponse', Progressresponse);
        res.status(200).json({
            msg: 'Progress saved',
            response: Progressresponse.todayprogress,
            status: 1
        });
        // const addprogress = new AddProgressModel({
        //     todayprogress: [{
        //         hours: req.body.hours,
        //         category: req.body.category,
        //         skill: req.body.skill
        //     }]
        // });

        // const Progressresponse = await addprogress.save();
        // console.log('Progressresponse',Progressresponse);
        // res.status(200).json({
        //     msg: 'Progress saved',
        //     response: Progressresponse.todayprogress,
        //     status: 1
        // });
    } catch (error) {
        console.log('something went wrong', error);
    }

}

const accoutncontroller = module.exports = { getAttendenceRecord, updateAttendence }